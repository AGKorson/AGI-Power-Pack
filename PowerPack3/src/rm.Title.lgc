[********************************************************************[[ rm.title: Opening/intro[[ This is an example of an intro screen, with scrolling credits and[ a theme song.[[********************************************************************#define creditline1      o1#define creditline2      o2#define musicInterlude f220#define line2visible   f221#define line_ptr       v220#define xpos           v221#define ypos           v222#define objdir         v223#define speed          v224#define lvarA          v225#define musicDelay     v226#define foreColor      v227#define backColor      v228#define letternum      v229#define timer          v230#define row            v231#define col            v232#define LP_DESIGNED    0#define LP_PROGRAMMED  1#define LP_GRAPHICS    2#define LP_BY          3#define LP_AND         4#define LP_NAME        5#define LP_GAP         6[ first time logic is executed, need to initializeif (newRoom) {  [ enable the mouse  enable.item(c255);    [ draw the picture  load.pic(currentRoom);  draw.pic(currentRoom);  discard.pic(currentRoom);    [ set horizon to just above scroll window  set.horizon(55);    [ disable player control and input  status.line.off();  prevent.input();  program.control();    [ set animation speed to max so the letters can change faster  animationInterval = FASTEST_SPEED;    [ initialize the credit line objects  load.view(vw.OpeningCredits);  animate.obj(creditline1);  animate.obj(creditline2);  [ use a cycle speed that isn't too fast  speed = 4;   cycle.time(creditline1, speed);  cycle.time(creditline2, speed);  speed = 7;   step.time(creditline1, speed);  step.time(creditline2, speed);    [ ignore other objects; otherwise  [ reposition.to.v command will 'shuffle'  [ the objects to avoid collisions  ignore.objs(creditline1);  ignore.objs(creditline2);    [ first object starts with 'designed'  set.view(creditline1, vw.OpeningCredits);  set.loop(creditline1, LP_DESIGNED);  fix.loop(creditline1);    [ second object starts with 'by'  set.view(creditline2, vw.OpeningCredits);  set.loop(creditline2, LP_BY);  fix.loop(creditline2);    [ position both lines just below scroll window  position(creditline1, 56, 126);  position(creditline2, 72, 126);    [ start moving the first credit line up through the scroll window  objdir = UP;  set.dir(creditline1, objdir);  draw(creditline1);  [ don't draw second line yet; wait until first line is further up    [ ensure pointer is reset  line_ptr = 0;    [ for intro screen, there was no fade out, so  [ if fading is enabled, the screen needs to be  [blanked before showing  if (newRoomFade) {    block(-20, 0, 0, 0);    [ a slight delay    v255 = 250;    cycle.time(o254, v255);  }  [ show the picture on screen  show.pic();     [ save colors  set.text.attribute(-1, 0);  [ display game title above scroll window  [ you can use a view for this instead of text, if desired  set.text.attribute(LT_GRAY, DK_GRAY);  display(3, 5, "AGI Powerpack Demo");  [ display game version below scroll window  display(21, 14, gameVersionMsg);  backColor = DK_GRAY;  row = 3;  [ check for fading  if (newRoomFade) {    [ fade in    block(-19, 0, 16, 0);  }    [ enable 4-channel  set(f18);  v23=1; [ tiny amount of attenuation  [ change music instruments[  set.key(-2, 0, c1);[  set.key(-2, 1, c1);[  set.key(-2, 2, c1);[  set.key(-3, 2, c21);  #message 21 "02023000F1F58404000000"  [ load the theme song  load.sound(m.theme);  [ and begin playing  sound(m.theme, musicDone);}[ flash title letters randomly++timer;if (timer == 1) {  timer = 0;  random(1, 15, foreColor);  toggle.monitor();  set.text.attribute(227, 228);  random(1, 18, letternum);  col = letternum;  col += 4;  display.v(row, col, letternum);}[ check for a keypressif ((have.key() || controller(c33) || controller(c34))) {[  print("key: %v19  ");[  display(2, 1, "key: %v19  ");  [ finish game setup; enable menu and game functions  set(enableMenu);  reset(disableGameFunctions);  [ restore default color scheme  set.text.attribute(0, -1);  [ set default speed  animationInterval = NORMAL_SPEED;  [ check for fading  if (newRoomFade) {    [ fade out    block(-20, 0, 12, 0);  }  [ go to first room  new.room(rm.Entrance); [ ##LE001##}[ second credit line is not drawn until first line reaches y=95if (!isset(line2visible)) {  get.posn(creditline1, xpos, ypos);  if (ypos <= 95) {    set(line2visible);    draw(creditline2);    set.dir(creditline2, objdir);  }}[ when first creditline object reaches topif (objHitEdge == 1) {  [ increment line counter  ++line_ptr;  [ counter will always be ODD  [ after first creditline object reaches top  if (line_ptr == 1) {    [ 'name'    set.loop(creditline1, LP_NAME);    xpos = 38;  }  if (line_ptr == 3) {    [ 'programmed'    set.loop(creditline1, LP_PROGRAMMED);    xpos = 47;  }  if (line_ptr == 5) {    [ 'name'    set.loop(creditline1, LP_NAME);    xpos = 38;    }  if (line_ptr == 7) {    [ start over with 'designed'    set.loop(creditline1, LP_DESIGNED);    xpos = 56;    }  [ move creditline back to bottom  ypos = 126;  reposition.to.v(creditline1, xpos, ypos);}[ when second creditline object reaches topif (objHitEdge == 2) {  [ increment line counter  ++line_ptr;    [ counter will always be EVEN after   [ second creditline object reaches top  if (line_ptr == 2) {    [ 'gap'    set.loop(creditline2, LP_GAP);    xpos = 70;  }  if (line_ptr == 4) {    [ 'by'    set.loop(creditline2, LP_BY);    xpos = 72;  }  if (line_ptr == 6) {    [ 'gap'    set.loop(creditline2, LP_GAP);    xpos = 70;  }  if (line_ptr == 8) {    [ start over with 'by'    set.loop(creditline2, LP_BY);    xpos = 72;    [ reset pointer    line_ptr = 0;  }  [ move credit line back to bottom  ypos = 126;  reposition.to.v(creditline2, xpos, ypos);}  [ restart theme music if the intro screen is still showing and end was reachedif (musicDone && currentRoom == rm.title && !musicInterlude) {  [set a delay flag  musicInterlude = true;  musicDelay = 0;  print("music done");}  if (musicInterlude) {  [ increment interlude delay until 3 seconds has passed  if (elapsedSeconds != oldSeconds) {    [ increment counter    musicDelay += 1;    if (musicDelay == 3) {      [play it again sam[      sound(m.theme, musicDone);      musicInterlude = false;    }  }}return();[*****[ messages         [  declared messages go here[*****#message 1 "A"#message 2 "G"#message 3 "I"#message 4 " "#message 5 "P"#message 6 "o"#message 7 "w"#message 8 "e"#message 9 "r"#message 10 "p"#message 11 "a"#message 12 "c"#message 13 "k"#message 14 " "#message 15 "D"#message 16 "e"#message 17 "m"#message 18 "o"#message 19 "AGI Powerpack Demo"#message 20 gameVersionMsg#message 64 "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"